# 网页整合工具 - 使用说明文档

## 📌 工具概述

**网页整合工具**是一款单页Web应用，用于将多个独立的HTML文件快速整合为一个带标签页切换功能的统一网页。该工具特别适合将分散的网页PPT、产品展示页、文档页面等整合为一个便于浏览和分享的单文件。

---

## 🎯 核心功能

### 1. 用途
- **多页面整合**：将多个完整的HTML文档合并为一个统一的交互式页面
- **标签页导航**：自动生成标签页界面，方便在不同页面间切换
- **iframe隔离**：每个页面在独立的iframe中呈现，避免样式和脚本冲突
- **一键下载**：生成的整合页面可立即下载为单个HTML文件，无需服务器部署

### 2. 典型应用场景
- 📊 将系列PPT页面整合为一个演示文稿
- 📚 合并多个产品手册页面
- 📝 整合分章节的文档或报告
- 🎨 集中展示多个设计原型

---

## 🖥️ 界面布局

### 主要组成部分

```
┌─────────────────────────────────────────────┐
│  🎨 渐变背景（动态色彩）                      │
│  ┌───────────────────────────────────────┐  │
│  │  网页整合工具                          │  │
│  │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━    │  │
│  │                                        │  │
│  │  📋 输入区域（textarea#htmlInput）      │  │
│  │  • 支持直接粘贴HTML代码                 │  │
│  │  • 支持拖拽.html文件                    │  │
│  │  • 代码编辑体验（等宽字体、语法高亮）    │  │
│  │                                        │  │
│  │  [🔄 开始整合] ← 操作按钮               │  │
│  │                                        │  │
│  │  📄 结果展示区（#resultSection）        │  │
│  │  • 生成的HTML代码预览                   │  │
│  │  • 可复制代码                          │  │
│  │  [⬇️ 下载整合页面] ← 下载链接           │  │
│  └───────────────────────────────────────┘  │
│                                             │
│  💬 通知气泡（右上角浮动）                   │
└─────────────────────────────────────────────┘
```

---

## 🔧 操作流程

### 步骤1：输入HTML内容

您有**两种方式**输入HTML内容：

#### 方式A：直接粘贴代码
1. 在文本框中粘贴完整的HTML代码
2. 多个页面需要通过**分隔符**区分：
   - **推荐方式**：使用注释分隔符 `<!-- ===== 文件分隔符 ===== -->`
   - **自动识别**：工具会自动识别重复的 `<!DOCTYPE>` 或 `<html>` 标签作为分隔

**示例格式**：
```html
<!DOCTYPE html>
<html>
<head><title>页面1</title></head>
<body><h1>第一个页面</h1></body>
</html>

<!-- ===== 文件分隔符 ===== -->

<!DOCTYPE html>
<html>
<head><title>页面2</title></head>
<body><h1>第二个页面</h1></body>
</html>
```

#### 方式B：拖拽.html文件
1. 直接将一个或多个`.html`文件拖拽到文本框区域
2. 文件会自动读取并填充到文本框
3. 多个文件会自动用分隔符连接

**拖拽提示**：
- 拖拽时文本框会高亮显示
- 支持同时拖拽多个文件
- 只接受`.html`扩展名的文件

---

### 步骤2：点击"开始整合"按钮

#### 按钮状态说明

| 状态 | 外观 | 说明 |
|------|------|------|
| **正常** | 🟢 蓝色背景，可点击 | 文本框有内容时可用 |
| **禁用** | 🔴 灰色背景，不可点击 | 文本框为空时自动禁用 |
| **加载中** | 🔄 旋转图标 + "处理中..." | 正在解析和生成整合页面 |

**加载反馈**：
- 按钮文字变为"处理中..."
- 显示旋转动画
- 按钮暂时不可点击，防止重复提交

---

### 步骤3：查看结果

整合成功后，页面会自动滚动到**结果展示区**：

#### 结果展示区包含：
1. **代码预览框**（`<pre id="output">`）
   - 显示生成的完整HTML代码
   - 代码格式化，便于阅读
   - 可复制代码内容

2. **下载按钮**（`#downloadLink`）
   - 蓝色醒目按钮
   - 点击即可下载整合后的HTML文件
   - 默认文件名：`merged-pages.html`

---

## 📊 整合输出形态

### 生成的HTML结构

整合工具会生成一个**自包含的单页应用**，具有以下特性：

```html
<!DOCTYPE html>
<html>
<head>
  <title>整合页面</title>
  <style>
    /* 内置标签页样式 */
    /* 响应式布局 */
  </style>
</head>
<body>
  <!-- 标签页导航栏 -->
  <div class="tabs">
    <button class="tab-button active">页面 1</button>
    <button class="tab-button">页面 2</button>
    ...
  </div>

  <!-- 内容区域 -->
  <div class="tab-content active">
    <iframe srcdoc="...第1个页面的完整HTML..." frameborder="0"></iframe>
  </div>
  <div class="tab-content">
    <iframe srcdoc="...第2个页面的完整HTML..." frameborder="0"></iframe>
  </div>

  <script>
    /* 标签页切换逻辑 */
  </script>
</body>
</html>
```

### 主要特点：

1. **标签页切换**
   - 顶部横向标签栏
   - 点击标签切换不同页面
   - 当前激活标签高亮显示

2. **iframe呈现**
   - 每个页面在独立的iframe中渲染
   - 页面间样式和脚本完全隔离
   - 使用`srcdoc`属性嵌入完整HTML

3. **响应式设计**
   - iframe自动填充可用空间
   - 标签栏在小屏幕上可滚动
   - 适配各种屏幕尺寸

---

## 🔔 通知系统

工具会在页面**右上角**显示浮动通知，提供实时反馈：

### 通知类型

| 类型 | 颜色 | 触发场景 |
|------|------|----------|
| ✅ **成功** | 绿色 | 整合完成、文件读取成功 |
| ❌ **错误** | 红色 | 输入为空、文件格式错误、解析失败 |
| ⚠️ **警告** | 橙色 | 只检测到1个页面、文件过大 |
| ℹ️ **信息** | 蓝色 | 操作提示、进度更新 |

### 通知行为：
- 自动从右侧滑入
- 显示3秒后自动淡出消失
- 可同时显示多条通知
- 支持手动点击关闭

---

## ⚠️ 支持的网页代码类型

### ✅ 必须满足的条件

工具**仅支持**以下格式的HTML内容：

1. **完整的HTML文档结构**
   ```html
   <!DOCTYPE html>
   <html>
     <head>...</head>
     <body>...</body>
   </html>
   ```

2. **必须包含的标签**
   - `<!DOCTYPE html>` 声明（推荐HTML5格式）
   - 或 `<html>` 根标签
   - 完整的 `<head>` 和 `<body>` 结构

3. **分隔多个页面的方式**
   - **方式1**：使用注释分隔符
     ```html
     <!-- ===== 文件分隔符 ===== -->
     ```
   - **方式2**：重复的 `<!DOCTYPE>` 标签
   - **方式3**：重复的 `<html>` 标签

---

### ❌ 不支持的内容

以下类型的内容**无法正确整合**：

| 不支持类型 | 示例 | 问题 |
|------------|------|------|
| **HTML片段** | `<div>内容</div>` | 缺少完整文档结构 |
| **组件代码** | React/Vue组件 | 不是独立可运行的HTML |
| **服务器模板** | PHP/JSP/ERB文件 | 包含服务端语法 |
| **相对路径资源** | `<img src="./logo.png">` | iframe中路径会失效 |

---

## 🚨 重要限制与注意事项

### 1. 资源引用问题

**问题**：页面内的相对路径资源（图片、CSS、JS）在整合后可能无法加载

**原因**：iframe使用`srcdoc`属性时，没有明确的base URL，相对路径无法解析

**解决方案**：
- ✅ 使用**绝对URL**引用外部资源：
  ```html
  <img src="https://example.com/images/logo.png">
  <link rel="stylesheet" href="https://cdn.example.com/style.css">
  ```
- ✅ 使用**Data URL**嵌入资源：
  ```html
  <img src="data:image/png;base64,iVBORw0KG...">
  ```
- ✅ 使用**内联样式和脚本**：
  ```html
  <style>/* CSS代码 */</style>
  <script>/* JS代码 */</script>
  ```

---

### 2. 页面片段无法识别

**问题**：只提交部分HTML代码（如`<div>...</div>`）不会被识别为页面

**原因**：工具依赖`<!DOCTYPE>`或`<html>`标签判断页面边界

**解决方案**：
- 将片段包装为完整文档：
  ```html
  <!DOCTYPE html>
  <html>
  <head><title>临时页面</title></head>
  <body>
    <div>您的原始内容</div>
  </body>
  </html>
  ```

---

### 3. 跨域资源限制

**问题**：某些外部资源可能因跨域策略无法加载

**表现**：控制台出现CORS错误

**建议**：
- 优先使用支持CORS的CDN资源
- 或将资源转为Data URL内嵌

---

### 4. 脚本安全限制

**问题**：某些浏览器可能阻止iframe中的脚本执行

**建议**：
- 测试生成的文件在目标浏览器中的表现
- 避免依赖复杂的第三方脚本

---

## 📋 最佳实践清单

在使用网页整合工具前，请确认：

- [ ] 每个HTML文件都是**完整的文档**（包含`<!DOCTYPE>`和`<html>`）
- [ ] 所有图片、CSS、JS使用**绝对URL**或**内联方式**
- [ ] 文件间使用**清晰的分隔符**（如`<!-- ===== 文件分隔符 ===== -->`）
- [ ] 测试单个页面可以**独立在浏览器中打开**
- [ ] 避免使用需要服务器支持的动态内容（PHP/ASP等）
- [ ] 文件总大小控制在合理范围（建议<10MB）

---

## 🛠️ 技术架构参考

### 文件组成

| 文件 | 职责 |
|------|------|
| `网页整合工具.html` | 主页面结构、DOM元素 |
| `网页整合工具-style.css` | 视觉样式、动画效果 |
| `网页整合工具-script.js` | `WebMerger`类、业务逻辑 |

### 核心类：WebMerger

```javascript
class WebMerger {
  // 初始化：绑定DOM事件
  constructor() { ... }

  // 解析多页面：按分隔符拆分
  parseMultipleHtmlPages(input) { ... }

  // 生成整合HTML：创建tabs+iframe结构
  createIframeMergedHtml(pages) { ... }

  // 展示结果：代码预览+下载
  showResults(html) { ... }

  // 通知系统：浮动提示
  showNotification(message, type) { ... }
}
```

---

## ❓ 常见问题

### Q1: 为什么我的图片没有显示？
**A**: 检查图片路径是否为相对路径。请改用绝对URL或Data URL。

### Q2: 整合后的文件可以分享吗？
**A**: 可以！生成的HTML是完全自包含的，可以通过邮件、网盘等方式分享。

### Q3: 支持最多整合多少个页面？
**A**: 理论上无限制，但建议不超过50个页面以保证性能。

### Q4: 生成的文件需要服务器吗？
**A**: 不需要！可以直接在浏览器中打开`.html`文件。

### Q5: 可以整合包含视频的页面吗？
**A**: 可以，但视频资源必须使用绝对URL引用。

---

## 📞 技术支持

如遇到问题或有改进建议，请参考：
- 工具源码：查看`网页整合工具-script.js`了解实现细节
- 浏览器控制台：检查错误日志获取调试信息
- 测试页面：先用简单的示例HTML验证工具功能

---

**最后更新**: 2025-11-20
**版本**: v1.0
**适用对象**: 需要整合多个HTML页面的内容创作者、开发者、演示者
